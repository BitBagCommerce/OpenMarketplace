{% block subcontent %}
    <div class="ui segment">
        {{ form_start(form, { 'attr': {'class': 'ui loadable form dirtylisten'}}) }}

        {% include '@SyliusAdmin/Crud/form_validation_errors_checker.html.twig' %}
        <div class="ui stackable grid sylius-tabular-form">
            <div class="sixteen wide column">
                <div>
                    <div class="ui tab active" data-tab="details">
                        <h3 class="ui top attached header">Details</h3>
                        <div class="ui attached segment">
                            <div class="ui two column stackable grid">
                                <div class="column">
                                    <div class="ui segment">
                                        {{ form_label(form.code)}}
                                        {{ form_widget(form.code) }}
                                    </div>
                                </div>
                            </div>
                            <div class="column"></div>
                            <div class="ui one column stackable grid">
                                <div class="column">
                                    <h4 class="ui dividing header">Pricing</h4>
                                    {% for prices in form.productListingPrice %}
                                        <div id="sylius_product_variant_channelPricings">
                                            <div class="ui top attached tabular menu">
                                                <a class="item active" data-tab="{{ prices.vars.name }}">{{ prices.vars.label }}</a>
                                            </div>
                                            <div class="ui bottom attached active tab segment" data-tab="{{ prices.vars.name }}">
                                                <div class="ui info message">
                                                    {{ 'sylius.ui.product.product_not_active_in_channel'|trans }}
                                                </div>
                                                <div class="field">
                                                    <div id="{{ prices.vars.id }}">
                                                        {% for price in prices %}
                                                            <div class="field">
                                                                {{ form_label(price) }}
                                                                <div class="ui labeled input">
                                                                    {{ form_widget(price) }}
                                                                </div>
                                                            </div>
                                                        {% endfor %}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="ui hidden divider"></div>
                            <div class="ui styled fluid accordion">
                                {% for index, translations in form.translations %}
                                    {% set flag = translations.vars.name|split('_')[1]|lower %}
                                    <div data-locale="{{ translations.vars.name }}">
                                        <div class="title {% if index == "en_US" %}active{% endif %}">
                                            <i class="dropdown icon"></i>
                                            <i class="{{ flag }} flag"></i>
                                            {{ translations.vars.name }}
                                        </div>
                                        <div class="ui content {% if index == "en_US" %}active{% endif %}">
                                            {% for translation in translations %}
                                                {{ form_label(translation) }}
                                                {{ form_widget(translation) }}
                                            {% endfor %}
                                        </div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            {% form_theme form '@SyliusAdmin/Product/Attribute/attributesCollection.html.twig' %}


            <div class="ui attached segment" data-tab="attributes">
                <h3 class="ui top attached header">{{ 'sylius.ui.attributes'|trans }}</h3>

                <div class="ui attached segment">
                    {{ render(url('bitbag_vendor_get_product_attributes')) }}
                    <div id="attributesContainer" data-count="{{ form.attributes|length }}">
                        {{ form_widget(form.attributes, {'attr': {'translations': form.translations} }) }}
                    </div>

{#                    {{ sylius_template_event(['sylius.admin.product.edit.tab_attributes', 'sylius.admin.product.tab_attributes'], {'form': form}) }}#}
                </div>
            </div>

            <div class="ui attached segment">
                {% include '@BitBagSyliusMultiVendorMarketplacePlugin/Vendor/ProductListing/_imageForm.html.twig' %}
                </div>


            </div>
            <div class="ui buttons">
                {{ form_row(form._token) }}
                {{ form_widget(form.save) }}
                {{ form_widget(form.saveAndAdd) }}
                {% include '@SyliusUi/Form/Buttons/_cancel.html.twig' with {'path': paths.cancel|default(null)} %}
            </div>
        </div>



    <button class="ui labeled icon primary button" type="submit" id="sylius_save_changes_button"><i class="save icon"></i> Save changes</button>
        {{ form_end(form, {'render_rest': true})  }}

{#    </div>#}
{% endblock %}

